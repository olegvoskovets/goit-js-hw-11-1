{"mappings":"AAAe,SAAAA,EAAoBC,GACjC,MAAO,wBAEOA,EAAKC,mGAEyBD,EAAKE,oBAAoBF,EAAKG,cAAcH,EAAKG,wJAG/DH,EAAKI,2GAGHJ,EAAKK,8GAGFL,EAAKM,kHAGJN,EAAKO,iG,CCXpC,MAAMC,EAAc,ICNZ,MAKbC,QAAQC,GACN,MAAMC,EAAO,GAKb,OAJAA,EAAKC,OAASC,SAASC,cAAcJ,GACrCC,EAAKI,MAAQJ,EAAKC,OAAOE,cAAc,UACvCH,EAAKK,QAAUL,EAAKC,OAAOE,cAAc,YAElCH,C,CAGTM,SACEC,KAAKP,KAAKC,OAAOO,UAAW,EAC5BD,KAAKP,KAAKC,OAAOQ,YAAc,cACrBF,KAALP,KAAKK,QAAQK,UAAUC,IAAI,a,CAGlCC,UACEL,KAAKP,KAAKC,OAAOO,UAAW,EAC5BD,KAAKP,KAAKC,OAAOQ,YAAc,oBAC/BF,KAAKP,KAAKK,QAAQK,UAAUG,OAAO,Y,CAGrCC,OACEP,KAAKP,KAAKC,OAAOS,UAAUG,OAAO,Y,CAEpCE,OACER,KAAKP,KAAKC,OAAOS,UAAUC,IAAI,Y,CA7BjCK,aAAYjB,SAAEA,EAAQkB,OAAEA,GAAS,IAC/BV,KAAKP,KAAOO,KAAKT,QAAQC,GACzBkB,GAAUV,KAAKQ,M,GDGwB,CAEzChB,SAAU,aACVkB,QAAQ,IAGJC,EAAO,CACXC,WAAYjB,SAASC,cAAc,gBACnCiB,QAASlB,SAASC,cAAc,aAI5BkB,EAAiB,IEfR,MAQbC,gBACE,GAAyB,KAArBf,KAAKgB,aAGLhB,KAAKiB,MAAO,CACd,MAAMC,EAAM,qEAAoClB,KAAKgB,4EAA4EhB,KAAKmB,iBAAiBnB,KAAKoB,WAC5J,OAAOH,MAAMC,GACVG,MAAKC,GAAOA,EAAIC,SAChBF,MAAKG,IACJxB,KAAKyB,cAAcD,EAAKE,WACjBF,I,EAIfG,YACE3B,KAAKmB,KAAO,C,CAGdM,cAAcG,GACRA,EAAQ5B,KAAKmB,KAAOnB,KAAKoB,SAC3BpB,KAAKmB,MAAQ,EAEbnB,KAAKiB,OAAQ,C,CAIbY,YACF,OAAO7B,KAAKgB,W,CAGVa,UAAMC,GACR9B,KAAKgB,YAAcc,C,CAtCrBrB,cACET,KAAKgB,YAAc,GACnBhB,KAAKmB,KAAO,EACZnB,KAAKoB,SAAW,GAChBpB,KAAKiB,OAAQ,C,GFuBjB,SAASc,I,IAGLC,EAFElB,EAAeG,QAkCS,IAAxBH,EAAeK,OACjBR,EAAKE,QAAQoB,UAAY,IAjCK,QAA9BD,EAAAlB,EAAeC,uBAAe,IAA9BiB,KAAgCX,MAAKG,IAC/BV,EAAeG,OACjB3B,EAAYiB,OACZjB,EAAYe,WAEZf,EAAYkB,OAgBpB,SAA0BgB,GACxB,MAAMU,EAASV,EAAKW,KACjBC,KAAItD,GACID,EAAWC,KAEnBuD,KAAK,IACR/C,EAAYS,SACZY,EAAKE,QAAQyB,mBAAmB,YAAaJ,E,CApBzCK,CAAiBf,EAAK,I,CAtB5Bb,EAAKC,WAAW4B,iBAAiB,UA2BjC,SAAkBC,GAChBA,EAAEC,iBACFX,G,IA5BFpB,EAAKC,WAAW4B,iBAAiB,SAIjC,SAAqBC,GACnB3B,EAAeG,OAAQ,EACvBH,EAAee,MAAQY,EAAEE,cAAcC,SAAS5B,YAAY6B,MAC5D/B,EAAea,W,IALjBrC,EAAYG,KAAKC,OAAO8C,iBAAiB,SA4BzC,WACET,G","sources":["src/templates/createCard.js","src/index.js","src/button/loadMoreBtn.js","src/api/api_server.js"],"sourcesContent":["export default function createCard(card) {\n  return `\n   \n     <a href=\"${card.largeImageURL}\" >\n        <div class=\"photo-card\">\n           <img  class='gallery__image' src=${card.webformatURL} alt=${card.tags} title=${card.tags} loading=\"lazy\" width='350' height = '235' />\n             <div class=\"info\">\n            <p class=\"info-item\">\n               <b>Likes <span>${card.likes}</span></b>\n            </p>\n             <p class=\"info-item\">\n                 <b>Views <span>${card.views}</span></b>\n             </p>\n            <p class=\"info-item\">\n                 <b>Comments <span>${card.comments}</span></b>\n            </p>\n             <p class=\"info-item\">\n                 <b>Downloads <span>${card.downloads}</span> </b>\n             </p>\n          </div>\n        </div>\n     </a>\n  \n    `;\n}\n//\n","import NewsApiService from './api/api_server';\nimport createCard from './templates/createCard';\n\nimport LoadMoreBtn from './button/loadMoreBtn';\n\n//import './sass/index.scss';\nexport const loadMoreBtn = new LoadMoreBtn({\n  // selector: '[data-action=\"load-more\"]',\n  selector: '.load-more',\n  hidden: true,\n});\n\nconst refs = {\n  searchForm: document.querySelector('#search-form'),\n  gallery: document.querySelector('.gallery'),\n  // loadMore: document.querySelector('.load-more'),\n};\n\nconst newsApiService = new NewsApiService();\n\nrefs.searchForm.addEventListener('submit', onSearch);\nrefs.searchForm.addEventListener('input', handleInput);\n\nloadMoreBtn.refs.button.addEventListener('click', onLoadMore);\n\nfunction handleInput(e) {\n  newsApiService.fetch = true;\n  newsApiService.query = e.currentTarget.elements.searchQuery.value;\n  newsApiService.resetPage();\n}\n\nfunction fetchGalleray() {\n  if (newsApiService.fetch) {\n    clearGallerayInnerHTML();\n    newsApiService.fetchGalleray()?.then(data => {\n      if (newsApiService.fetch) {\n        loadMoreBtn.show();\n        loadMoreBtn.disable();\n      } else {\n        loadMoreBtn.hide();\n      }\n\n      appendDateMarcup(data);\n    });\n  }\n}\n\nfunction onSearch(e) {\n  e.preventDefault();\n  fetchGalleray();\n}\nfunction onLoadMore() {\n  fetchGalleray();\n}\n\nfunction appendDateMarcup(data) {\n  const markup = data.hits\n    .map(card => {\n      return createCard(card);\n    })\n    .join('');\n  loadMoreBtn.eneble();\n  refs.gallery.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction clearGallerayInnerHTML() {\n  if (newsApiService.page === 1) {\n    refs.gallery.innerHTML = '';\n  }\n}\n","export default class LoadMoreBtn {\n  constructor({ selector, hidden = false }) {\n    this.refs = this.getRefs(selector);\n    hidden && this.hide();\n  }\n  getRefs(selector) {\n    const refs = {};\n    refs.button = document.querySelector(selector);\n    refs.label = refs.button.querySelector('.label');\n    refs.spinner = refs.button.querySelector('.spinner');\n\n    return refs;\n  }\n\n  eneble() {\n    this.refs.button.disabled = false;\n    this.refs.button.textContent = 'Показати ще';\n    this.refs.spinner.classList.add('.is-hidden');\n  }\n\n  disable() {\n    this.refs.button.disabled = true;\n    this.refs.button.textContent = 'Йде загрузка ... ';\n    this.refs.spinner.classList.remove('is-hidden');\n  }\n\n  show() {\n    this.refs.button.classList.remove('is-hidden');\n  }\n  hide() {\n    this.refs.button.classList.add('is-hidden');\n  }\n}\n","const KEY_PIXABAY = `35768020-57bf980d1d69223dcc2d256cc`;\nconst BASE_URL = `https://pixabay.com/api/`;\n\nexport default class newsApiService {\n  constructor() {\n    this.searchQuery = '';\n    this.page = 1;\n    this.per_page = 40;\n    this.fetch = true;\n  }\n\n  fetchGalleray() {\n    if (this.searchQuery === '') {\n      return;\n    }\n    if (this.fetch) {\n      const url = `${BASE_URL}?key=${KEY_PIXABAY}&q=${this.searchQuery}&image_type=photo&orientation=horizontal&safesearch=true&page=${this.page}&per_page=${this.per_page}`;\n      return fetch(url)\n        .then(res => res.json())\n        .then(data => {\n          this.incrementPage(data.totalHits);\n          return data;\n        });\n    }\n  }\n  resetPage() {\n    this.page = 1;\n  }\n\n  incrementPage(total) {\n    if (total > this.page * this.per_page) {\n      this.page += 1;\n    } else {\n      this.fetch = false;\n    }\n  }\n\n  get query() {\n    return this.searchQuery;\n  }\n\n  set query(newQuery) {\n    this.searchQuery = newQuery;\n  }\n}\n"],"names":["$21b8aad54a51d57e$export$2e2bcd8739ae039","card","largeImageURL","webformatURL","tags","likes","views","comments","downloads","$1f0dc3b9307be026$export$740aa5c6a07ccd9c","getRefs","selector","refs","button","document","querySelector","label","spinner","eneble","this","disabled","textContent","classList","add","disable","remove","show","hide","constructor","hidden","$1f0dc3b9307be026$var$refs","searchForm","gallery","$1f0dc3b9307be026$var$newsApiService","fetchGalleray","searchQuery","fetch","url","page","per_page","then","res","json","data","incrementPage","totalHits","resetPage","total","query","newQuery","$1f0dc3b9307be026$var$fetchGalleray","ref","innerHTML","markup","hits","map","join","insertAdjacentHTML","$1f0dc3b9307be026$var$appendDateMarcup","addEventListener","e","preventDefault","currentTarget","elements","value"],"version":3,"file":"index.be1e6677.js.map"}